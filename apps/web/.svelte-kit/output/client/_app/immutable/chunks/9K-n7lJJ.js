import{b as o,g as t,e as s,d as i,u as n}from"./oD9g-Rhu.js";import{i as a}from"./CtLtXU_n.js";class c{#r=o(null);get currentProject(){return t(this.#r)}set currentProject(r){s(this.#r,r,!0)}#e=o(null);get currentWorkspace(){return t(this.#e)}set currentWorkspace(r){s(this.#e,r,!0)}#t=o(i([]));get projects(){return t(this.#t)}set projects(r){s(this.#t,r,!0)}#s=o(i([]));get workspaces(){return t(this.#s)}set workspaces(r){s(this.#s,r,!0)}#o=o(!1);get loading(){return t(this.#o)}set loading(r){s(this.#o,r,!0)}#a=o(null);get error(){return t(this.#a)}set error(r){s(this.#a,r,!0)}#i=n(()=>[...this.projects].sort((r,e)=>new Date(e.updatedAt).getTime()-new Date(r.updatedAt).getTime()).slice(0,5));get recentProjects(){return t(this.#i)}set recentProjects(r){s(this.#i,r)}async loadWorkspaces(){this.loading=!0,this.error=null;try{const r=await a.workspace.list();r.ok?this.workspaces=[...r.value]:this.error=r.error.message}catch(r){this.error=r instanceof Error?r.message:"Unknown error"}finally{this.loading=!1}}async loadProjects(r){this.loading=!0,this.error=null;try{const e=await a.project.list(r);e.ok?this.projects=[...e.value]:this.error=e.error.message}catch(e){this.error=e instanceof Error?e.message:"Unknown error"}finally{this.loading=!1}}async loadCurrent(){try{const[r,e]=await Promise.all([a.project.getCurrent(),a.workspace.getCurrent()]);r.ok&&(this.currentProject=r.value),e.ok&&(this.currentWorkspace=e.value)}catch(r){this.error=r instanceof Error?r.message:"Unknown error"}}async switchProject(r){try{const e=await a.project.switch(r);return e.ok?(await this.loadCurrent(),!0):(this.error=e.error.message,!1)}catch(e){return this.error=e instanceof Error?e.message:"Unknown error",!1}}getProjectById(r){return this.projects.find(e=>e.id===r)}getWorkspaceById(r){return this.workspaces.find(e=>e.id===r)}}const p=new c;export{p};
//# sourceMappingURL=9K-n7lJJ.js.map
