import{b as u,d,g as i,e as n,u as o}from"./oD9g-Rhu.js";import{i as a}from"./CtLtXU_n.js";class l{#s=u(d([]));get agents(){return i(this.#s)}set agents(s){n(this.#s,s,!0)}#t=u(!1);get loading(){return i(this.#t)}set loading(s){n(this.#t,s,!0)}#e=u(null);get error(){return i(this.#e)}set error(s){n(this.#e,s,!0)}#i=o(()=>this.agents.filter(s=>s.status==="executing"));get activeAgents(){return i(this.#i)}set activeAgents(s){n(this.#i,s)}#n=o(()=>this.agents.filter(s=>s.status==="idle"));get idleAgents(){return i(this.#n)}set idleAgents(s){n(this.#n,s)}#r=o(()=>this.agents.filter(s=>s.status==="paused"));get pausedAgents(){return i(this.#r)}set pausedAgents(s){n(this.#r,s)}_unsubscribeProgress=null;async load(){this.loading=!0,this.error=null;try{const s=await a.agent.list();s.ok?this.agents=[...s.value]:this.error=s.error.message}catch(s){this.error=s instanceof Error?s.message:"Unknown error"}finally{this.loading=!1}}async pause(s){if((await a.agent.pause(s)).ok){const t=this.agents.findIndex(r=>r.id===s);t!==-1&&(this.agents[t]={...this.agents[t],status:"paused"})}}async resume(s){if((await a.agent.resume(s)).ok){const t=this.agents.find(r=>r.id===s);if(t){const r=t.currentTaskId?"executing":"idle",g=this.agents.findIndex(h=>h.id===s);g!==-1&&(this.agents[g]={...this.agents[g],status:r})}}}subscribe(){this._unsubscribeProgress=a.on.agentProgress(s=>{const e=this.agents.findIndex(t=>t.id===s.agentId);e!==-1&&(this.agents[e]={...this.agents[e],status:"executing",currentTaskId:s.taskId})})}unsubscribe(){this._unsubscribeProgress&&(this._unsubscribeProgress(),this._unsubscribeProgress=null)}getById(s){return this.agents.find(e=>e.id===s)}}const p=new l;export{p as a};
//# sourceMappingURL=COVcd2O5.js.map
