import{f as h,a as l,t as _}from"../chunks/NTD14719.js";import{i as G}from"../chunks/CVZAUO0q.js";import{o as H}from"../chunks/BozG0qtE.js";import{p as z,y as J,g as r,a as A,e as o,c as i,t as g,s as w,b as v,$ as L,n as S,u as O,r as n}from"../chunks/oD9g-Rhu.js";import{e as B,s as y}from"../chunks/5-lN2Ztl.js";import{i as C}from"../chunks/h2fP5t0r.js";import{t as N}from"../chunks/DKH1Kl_R.js";import{p as m}from"../chunks/9K-n7lJJ.js";import{B as R}from"../chunks/CtLtXU_n.js";import{I as T}from"../chunks/CDDAkrrJ.js";var U=h('<div class="mb-3 rounded bg-red-50 p-2 text-xs text-red-600"> </div>'),V=h('<form class="p-4"><!> <div class="relative"><!> <div class="absolute inset-y-0 right-2 flex items-center"><!></div></div> <div class="mt-3 flex items-center justify-between text-xs text-surface-400"><span><!></span> <span><kbd class="rounded bg-surface-100 px-1 py-0.5">Cmd+Enter</kbd> to submit, <kbd class="rounded bg-surface-100 px-1 py-0.5">Esc</kbd> to close</span></div></form>');function X(p,x){z(x,!0);let s=v(""),a=v(!1),d=v(null),c=v(null);async function k(e){if(e.preventDefault(),!r(s).trim())return;const t=m.currentProject?.id;if(!t){o(d,"No project selected");return}o(a,!0),o(d,null);const f=await N.create({projectId:t,title:r(s).trim()});o(a,!1),f?(o(s,""),window.close()):o(d,N.error||"Failed to create task",!0)}function D(e){e.key==="Escape"&&window.close(),(e.metaKey||e.ctrlKey)&&e.key==="Enter"&&k(e)}J(()=>{r(c)&&r(c).focus()});var u=V();B("keydown",L,D);var j=i(u);{var F=e=>{var t=U(),f=i(t,!0);n(t),g(()=>y(f,r(d))),l(e,t)};C(j,e=>{r(d)&&e(F)})}var b=w(j,2),$=i(b);T($,{type:"text",class:"pr-24 text-lg",placeholder:"What needs to be done?",get disabled(){return r(a)},get value(){return r(s)},set value(e){o(s,e,!0)},get ref(){return r(c)},set ref(e){o(c,e,!0)}});var E=w($,2),M=i(E);{let e=O(()=>r(a)||!r(s).trim());R(M,{type:"submit",size:"sm",get disabled(){return r(e)},children:(t,f)=>{S();var K=_();g(()=>y(K,r(a)?"...":"Add")),l(t,K)},$$slots:{default:!0}})}n(E),n(b);var P=w(b,2),I=i(P),Q=i(I);{var W=e=>{var t=_();g(()=>y(t,`Project: ${m.currentProject.name??""}`)),l(e,t)},q=e=>{var t=_("No project selected");l(e,t)};C(Q,e=>{m.currentProject?e(W):e(q,!1)})}n(I),S(2),n(P),n(u),B("submit",u,k),l(p,u),A()}var Y=h('<div class="flex h-screen items-center justify-center bg-transparent"><div class="w-full max-w-md overflow-hidden rounded-xl bg-white shadow-2xl"><!></div></div>');function le(p,x){z(x,!1),H(async()=>{await m.loadCurrent()}),G();var s=Y(),a=i(s),d=i(a);X(d,{}),n(a),n(s),l(p,s),A()}export{le as component};
//# sourceMappingURL=7.D7ROLiCQ.js.map
