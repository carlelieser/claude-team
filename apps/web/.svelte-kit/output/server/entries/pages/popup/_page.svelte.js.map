{"version":3,"file":"_page.svelte.js","sources":["../../../../../../src/lib/components/popup/quick-task-input.svelte","../../../../../../src/routes/popup/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { taskStore } from '$lib/stores/tasks.svelte';\n  import { projectStore } from '$lib/stores/projects.svelte';\n  import { Button } from '$lib/components/ui/button';\n  import { Input } from '$lib/components/ui/input';\n\n  let title = $state('');\n  let submitting = $state(false);\n  let error = $state<string | null>(null);\n  let inputElement = $state<HTMLInputElement | null>(null);\n\n  async function handleSubmit(e: Event) {\n    e.preventDefault();\n\n    if (!title.trim()) {\n      return;\n    }\n\n    const projectId = projectStore.currentProject?.id;\n    if (!projectId) {\n      error = 'No project selected';\n      return;\n    }\n\n    submitting = true;\n    error = null;\n\n    const result = await taskStore.create({\n      projectId,\n      title: title.trim(),\n    });\n\n    submitting = false;\n\n    if (result) {\n      title = '';\n      window.close();\n    } else {\n      error = taskStore.error || 'Failed to create task';\n    }\n  }\n\n  function handleKeydown(e: KeyboardEvent) {\n    if (e.key === 'Escape') {\n      window.close();\n    }\n\n    if ((e.metaKey || e.ctrlKey) && e.key === 'Enter') {\n      handleSubmit(e);\n    }\n  }\n\n  $effect(() => {\n    if (inputElement) {\n      inputElement.focus();\n    }\n  });\n</script>\n\n<svelte:window onkeydown={handleKeydown} />\n\n<form class=\"p-4\" onsubmit={handleSubmit}>\n  {#if error}\n    <div class=\"mb-3 rounded bg-red-50 p-2 text-xs text-red-600\">\n      {error}\n    </div>\n  {/if}\n\n  <div class=\"relative\">\n    <Input\n      type=\"text\"\n      class=\"pr-24 text-lg\"\n      placeholder=\"What needs to be done?\"\n      bind:value={title}\n      bind:ref={inputElement}\n      disabled={submitting}\n    />\n\n    <div class=\"absolute inset-y-0 right-2 flex items-center\">\n      <Button\n        type=\"submit\"\n        size=\"sm\"\n        disabled={submitting || !title.trim()}\n      >\n        {submitting ? '...' : 'Add'}\n      </Button>\n    </div>\n  </div>\n\n  <div class=\"mt-3 flex items-center justify-between text-xs text-surface-400\">\n    <span>\n      {#if projectStore.currentProject}\n        Project: {projectStore.currentProject.name}\n      {:else}\n        No project selected\n      {/if}\n    </span>\n    <span>\n      <kbd class=\"rounded bg-surface-100 px-1 py-0.5\">Cmd+Enter</kbd> to submit,\n      <kbd class=\"rounded bg-surface-100 px-1 py-0.5\">Esc</kbd> to close\n    </span>\n  </div>\n</form>\n","<script lang=\"ts\">\n  import { QuickTaskInput } from '$lib/components/popup';\n  import { projectStore } from '$lib/stores/projects.svelte';\n  import { onMount } from 'svelte';\n\n  onMount(async () => {\n    await projectStore.loadCurrent();\n  });\n</script>\n\n<div class=\"flex h-screen items-center justify-center bg-transparent\">\n  <div class=\"w-full max-w-md overflow-hidden rounded-xl bg-white shadow-2xl\">\n    <QuickTaskInput />\n  </div>\n</div>\n"],"names":[],"mappings":";;;;;;wCAAA;AAMM,QAAA,QAAe;AACf,QAAA,aAAoB;AAEpB,QAAA,eAA+C;;;;;;;;;;;;;kBAkErC;AAAA;iBAFE;AAAA;;AAAA,kBAAK;;;;iBACP;AAAA;;AAAA,yBAAY;;;;;;;;kBAQA,CAAK,MAAM,KAAI;AAAA;iDAEb,KAAK,CAAA,EAAA;AAAA;;;;AAOxB,UAAA,aAAa,gBAAc;;iDACpB,aAAa,eAAe,IAAI,CAAA,EAAA;AAAA;;;;;;;;;;;;EAnC1C,CAAA;;;wCCzDR;;;;EAQQ,CAAA;;"}